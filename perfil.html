<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perfil - Gibiteka Max Zendron</title>
  <meta name="description" content="Gerencie seu perfil e veja estat√≠sticas do acervo na Gibiteka Max Zendron." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body { margin:0; font-family:'Poppins',sans-serif; background:linear-gradient(135deg,#0A1F44,#2B3A67); color:#fff; }
    .container{max-width:800px;margin:0 auto;padding:1rem;}
    header{background:#2B3A67;padding:1rem 0;box-shadow:0 2px 10px rgba(0,191,255,0.2);}
    .header-flex{display:flex;justify-content:space-between;align-items:center;}
    .site-title{font-size:1.5rem;font-weight:700;color:#00BFFF;}
    .nav-menu{list-style:none;display:flex;gap:1rem;margin:0;padding:0;}
    .nav-menu li a{color:#1E90FF;text-decoration:none;font-weight:600;cursor:pointer;}
    .section{padding:2rem;background:#2B3A67;border-radius:12px;margin:2rem 0;box-shadow:0 0 20px rgba(0,191,255,0.1);}
    h2{color:#00BFFF;text-align:center;margin-bottom:1rem;}
    .welcome{text-align:center;color:#E0F7FF;margin-bottom:2rem;font-size:1.2rem;}
    .stats{text-align:center;margin-bottom:2rem;font-size:1rem;color:#E0F7FF;}
    form{display:flex;flex-direction:column;gap:1rem;}
    input{padding:0.75rem;border-radius:8px;border:none;font-size:1rem;}
    .button{background:linear-gradient(135deg,#1E90FF,#00BFFF);color:#fff;padding:0.75rem;border-radius:8px;font-weight:bold;border:none;cursor:pointer;}
    .button:hover{transform:scale(1.05);}
    footer{background:#2B3A67;color:#00BFFF;text-align:center;padding:1rem;font-size:0.9rem;}
  </style>
</head>
<body>
  <header>
    <div class="container header-flex">
      <h1 class="site-title">Gibiteka Max Zendron</h1>
      <nav>
        <ul class="nav-menu">
          <li><a href="index.html">üè† In√≠cio</a></li>
          <li><a href="acervo.html">Acervo</a></li>
          <li><a href="servicos.html">Servi√ßos</a></li>
          <li><a href="pesquisa.html">Pesquisa</a></li>
          <li><a href="perfil.html">Perfil</a></li>
          <li><a onclick="logout()">üö™ Logout</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <h2>Meu Perfil</h2>
      <p class="welcome" id="welcomeMsg"></p>
      <p class="stats" id="stats"></p>

      <h3 style="text-align:center;color:#00BFFF;">Editar Dados</h3>
      <form id="editForm">
        <input type="text" id="editName" placeholder="Novo nome" />
        <input type="password" id="editPassword" placeholder="Nova senha" />
        <button type="submit" class="button">Salvar Altera√ß√µes</button>
      </form>
    </div>
  </main>

  <footer>
    <div class="container">&copy; 2025 Gibiteka Max Zendron ‚Äî Todos os direitos reservados</div>
  </footer>

  <script>
    // Recupera usu√°rio logado
    const loggedUser = localStorage.getItem("loggedUser");
    if (!loggedUser) {
      alert("Voc√™ precisa estar logado para acessar o perfil.");
      window.location.href = "login.html";
    }

    // Dados do usu√°rio
    const userData = JSON.parse(localStorage.getItem(loggedUser));
    const userName = userData ? userData.name : "Usu√°rio";
    const userEmail = userData ? userData.email : loggedUser;

    // Mensagem de boas-vindas
    document.getElementById("welcomeMsg").textContent = `Bem-vindo, ${userName}! Seu email √© ${userEmail}.`;

    // Estat√≠sticas do acervo
    const acervoKey = `acervo_${loggedUser}`;
    const acervo = JSON.parse(localStorage.getItem(acervoKey)) || [];
    document.getElementById("stats").textContent = `Voc√™ possui ${acervo.length} quadrinho(s) no seu acervo.`;

    // Editar dados
    document.getElementById("editForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const newName = document.getElementById("editName").value;
      const newPassword = document.getElementById("editPassword").value;

      if (newName) userData.name = newName;
      if (newPassword) userData.password = newPassword;

      localStorage.setItem(loggedUser, JSON.stringify(userData));
      alert("Dados atualizados com sucesso!");
      location.reload();
    });

    // Logout
    function logout() {
      localStorage.removeItem("loggedUser");
      alert("Voc√™ saiu da sua conta.");
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
