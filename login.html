<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Gibiteka Max Zendron</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="container header-flex">
      <h1 class="site-title">Gibiteka Max Zendron</h1>
      <nav>
        <ul class="nav-menu">
          <li><a href="index.html">Início</a></li>
          <li><a href="acervo.html">Acervo</a></li>
          <li><a href="servicos.html">Serviços</a></li>
          <li><a href="pesquisa.html">Pesquisa</a></li>
          <li><a href="perfil.html">Perfil</a></li>
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="login.html">Login</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="hero">
    <h2>Entrar ou Cadastrar</h2>
    <div class="card">
      <input type="email" id="email" placeholder="Email" />
      <input type="password" id="password" placeholder="Senha" />
      <div id="nameField" style="display:none;">
        <input type="text" id="name" placeholder="Nome (para cadastro)" />
      </div>
      <button class="button" onclick="handleAuth()">Entrar</button>
      <div class="toggle" onclick="toggleMode()">Quero me cadastrar</div>
    </div>
  </main>

  <footer>
    <div class="container">&copy; 2025 Gibiteka Max Zendron — Todos os direitos reservados</div>
  </footer>

  <script>
    let isSignup = false;
    function toggleMode() {
      isSignup = !isSignup;
      document.getElementById('nameField').style.display = isSignup ? 'block' : 'none';
      document.querySelector('.button').textContent = isSignup ? 'Cadastrar' : 'Entrar';
      document.querySelector('.toggle').textContent = isSignup ? 'Já tenho conta' : 'Quero me cadastrar';
    }
    function handleAuth() {
      const email = document.getElementById('email').value.trim().toLowerCase();
      const password = document.getElementById('password').value.trim();
      const name = document.getElementById('name').value.trim();
      const users = JSON.parse(localStorage.getItem('users') || '[]');
      if (isSignup) {
        if (users.find(u => u.email === email)) return alert('Email já cadastrado.');
        users.push({ email, name: name || 'Usuário', password });
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('loggedUser', email);
        window.location.href = 'dashboard.html';
      } else {
        const user = users.find(u => u.email === email && u.password === password);
        if (!user) return alert('Email ou senha inválidos.');
        localStorage.setItem('loggedUser', email);
        window.location.href = 'dashboard.html';
      }
    }
  </script>
</body>
</html>
